apiVersion: scylla.scylladb.com/v1
kind: ScyllaCluster
metadata:
  name: scylla-demo
  namespace: scylla
spec:
  version: "4.7.0"
  datacenters:
    - name: dc1
      racks:
        - name: rack1
          members: 3
          storage:
            capacity: 20Gi
            storageClassName: local-path
          resources:
            requests:
              cpu: "1000m"
              memory: "2Gi"
            limits:
              cpu: "2000m"
              memory: "4Gi"
          # Optional: prefer spreading pods across nodes
          podTemplate:
            spec:
              affinity:
                podAntiAffinity:
                  requiredDuringSchedulingIgnoredDuringExecution:
                    - labelSelector:
                        matchExpressions:
                          - key: "app.kubernetes.io/instance"
                            operator: In
                            values:
                              - scylla-demo
                      topologyKey: "kubernetes.io/hostname"
